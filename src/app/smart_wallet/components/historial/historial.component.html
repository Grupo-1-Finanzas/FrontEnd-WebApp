<div class="historial-page">
  <table mat-table [dataSource]="operations" class="mat-elevation-z8">
    <!-- ID Column -->
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef> ID </th>
      <td mat-cell *matCellDef="let operation"> {{operation.id}} </td>
    </ng-container>

    <!-- Moneda Column -->
    <ng-container matColumnDef="moneda">
      <th mat-header-cell *matHeaderCellDef> Moneda </th>
      <td mat-cell *matCellDef="let operation"> {{operation.currency}} </td>
    </ng-container>

    <!-- Capital Column -->
    <ng-container matColumnDef="capital">
      <th mat-header-cell *matHeaderCellDef> Capital </th>
      <td mat-cell *matCellDef="let operation"> {{operation.creditValue}} </td>
    </ng-container>

    <!-- Cuotas Column -->
    <ng-container matColumnDef="cuotas">
      <th mat-header-cell *matHeaderCellDef> Cuotas </th>
      <td mat-cell *matCellDef="let operation"> {{operation.numberOfInstallments}} </td>
    </ng-container>

    <!-- Cuota Inicial Column -->
    <ng-container matColumnDef="cuota_inicial">
      <th mat-header-cell *matHeaderCellDef> Cuota Inicial </th>
      <td mat-cell *matCellDef="let operation">
        {{ operation.numberOfInstallments > 1 ? (operation.initialFeePercentage * operation.creditValue / 100) : operation.creditValue | number: '1.2-2' }}
      </td>
    </ng-container>

    <!-- Fecha Column -->
    <ng-container matColumnDef="fecha">
      <th mat-header-cell *matHeaderCellDef> Fecha </th>
      <td mat-cell *matCellDef="let operation"> {{operation.date | date:'dd/MM/yyyy'}} </td>
    </ng-container>

    <!-- Proximo Pago Column-->
    <ng-container matColumnDef="proximo_pago">
      <th mat-header-cell *matHeaderCellDef> Próximo Pago </th>
      <td mat-cell *matCellDef="let operation"> {{operation.proximo_pago | date:'dd/MM/yyyy'}} </td>
    </ng-container>

    <!-- Plazo Gracia Column -->
    <ng-container matColumnDef="plazo_gracia">
      <th mat-header-cell *matHeaderCellDef> Plazo de Gracia </th>
      <td mat-cell *matCellDef="let operation"> {{operation.gracePeriod}} </td>
    </ng-container>

    <!-- Periodo Gracia Column -->
    <ng-container matColumnDef="periodo_gracia">
      <th mat-header-cell *matHeaderCellDef> Periodo de Gracia </th>
      <td mat-cell *matCellDef="let operation"> {{operation.gracePeriodNumber}} </td>
    </ng-container>

    <!-- Tipo Tasa Column -->
    <ng-container matColumnDef="tipo_tasa">
      <th mat-header-cell *matHeaderCellDef> Tipo de Tasa </th>
      <td mat-cell *matCellDef="let operation"> {{operation.rateType}} </td>
    </ng-container>

    <!-- Capitalizacion Column -->
    <ng-container matColumnDef="capitalizacion">
      <th mat-header-cell *matHeaderCellDef> Capitalización </th>
      <td mat-cell *matCellDef="let operation"> {{operation.capitalization}} </td>
    </ng-container>

    <!-- Tasa Column -->
    <ng-container matColumnDef="tasa">
      <th mat-header-cell *matHeaderCellDef> Tasa </th>
      <td mat-cell *matCellDef="let operation"> {{operation.rateValue}}% </td>
    </ng-container>

    <!-- Total Column-->
    <ng-container matColumnDef="total">
      <th mat-header-cell *matHeaderCellDef> Total a Pagar</th>
      <td mat-cell *matCellDef="let operation"> {{calculateTotal(operation) | number:'1.2-2'}} </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

  </table>

</div>
